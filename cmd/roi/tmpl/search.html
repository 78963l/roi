<!doctype html>
<html>
<head>
	<title>roi</title>
	<script src="/static/vue.js"></script>
	<script>
	function projectChanged() {
		prj = document.getElementById("project-select").value;
		document.location.href = prj;
	}
	</script>
	<link rel="stylesheet" href="/static/roi.css">
</head>
<body style="">
	{{template "nav.html" $}}
	<div style="position:sticky;top:40px;width:100%;height:45px;background-color:#DDDDDD;padding:5px;">
		<div style="display:flex;">
			<select id="project-select" onchange="projectChanged()">
				{{range $.Projects}}
					<option value={{.}} {{if eq . $.Project}}selected{{end}}>{{.}}</option>
				{{end}}
			</select>
			<form>
				<input type="text" name="scene" placeholder="씬" value="{{$.FilterScene}}">
				<input type="text" name="shot" placeholder="샷" value="{{$.FilterShot}}">
				<select id="status-select" name="status">
					<option value="" {{if eq $.FilterStatus ""}}selected{{end}}>모든 상태</option>
					<option value="in-progress" {{if eq $.FilterStatus "in-progress"}}selected{{end}}>진행중</option>
					<option value="done" {{if eq $.FilterStatus "done"}}selected{{end}}>완료</option>
				</select>
				<input type="submit" value="검색">
			</form>
		</div>
	</div>
	<div id="main">
		<div style="display:flex;flex:1;">
			<div style="flex:1;">
			{{range .Shots}}
				<div class="shot" style="display:flex;padding:5px 10px 2px 10px;border:solid 1px #DDDDDD;background-color:white;">
					<div style="width:192px;margin-right:20px;">
						<div style="height:20px;display:flex;align-items:end;margin-bottom:3px;">
							<div style="font-size:15px;"><a href="/shot/{{$.Project}}/{{.Name}}" style="color:black;">{{.Name}}</a> {{if ne .Scene ""}}<div style="font-size:10px;color:#BBBBBB;display:inline-block;"> / {{.Scene}}</div>{{end}}</div>
						</div>
						{{$hasThumb := hasThumbnail $.Project .Name}}
						<div>
						{{if $hasThumb}}
							<img style="width:192px;height:108px" src="/thumbnail/{{$.Project}}/{{.Name}}.png" />
						{{else}}
							<img style="width:192px;height:108px" src="/static/thumbnail_blank.png" />
						{{end}}
						</div>
						<div style="display:flex;justify-content:space-between;font-size:10px;color:gray;">
							<div>{{.TimecodeIn}} - {{.TimecodeOut}}</div><div style="">{{.Duration}}f</div>
						</div>
					</div>
					<div style="flex:1;display:flex;flex-direction:column;">
						<div style="height:20px;display:flex;align-items:end;margin-bottom:3px;">
							<div style="font-size:12px;align-items:end;padding:0 4px;background-color:#4488AA;color:white;">{{.Status}}</div>
						</div>
						<div style="flex:1;display:flex;">
							<div style="width:250px;margin-right:20px;font-size:12px;">
								<div style="height:20px;margin:0 10px 3px 0;border-bottom:solid 1px gray;">CG</div>
								<div>{{.CGDescription}}</div>
							</div>
							<div style="flex:1;font-size:12px;display:flex;flex-direction:column;">
								<div style="height:20px;margin:0 10px 3px 0;border-bottom:solid 1px gray;">작업</div>
								<div class="shot-work">
									<div style="display:flex;border-bottom:solid 1px #BBBBBB;">
										<div style="width:30px;">1</div><div style="width:100px;">2014-01-01</div><div style="flex:1;">O.K</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div style="height:10px;"></div>

			{{end}}
			</div>
		</div>
	</div>
</body>
</html>
